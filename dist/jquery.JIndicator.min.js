/*! <%= pkg.title || pkg.name %> - v<%= pkg.version %> - <%= grunt.template.today("yyyy-mm-dd") %>
<%= pkg.homepage ? "* " + pkg.homepage + "\n" : "" %>* Copyright (c) <%= grunt.template.today("yyyy") %> <%= pkg.author.name %>; Licensed <%= _.pluck(pkg.licenses, "type").join(", ") %> */
!function(a){"use strict";function b(a,b,c){var d,e,f;d=window.devicePixelRatio||1,e=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1,f=d/e,b.setTransform(f,0,0,f,0,0),c.middleHeight=c.canvasHeight/2,c.tHeight=c.barHeight*Math.sin(Math.PI/3),c.triangleHeight=c.tHeight+8,a.height=a.height}function c(a,b){a.beginPath(),a.moveTo(b.startX,b.canvasHeight/2),a.lineTo(b.startX+b.triangleHeight,b.middleHeight-b.barHeight/2),a.lineTo(b.startX+b.triangleHeight,b.middleHeight+b.barHeight/2),a.fillStyle=b.barColor.left,a.fill(),a.closePath(),a.fillRect(b.startX+b.triangleHeight,b.middleHeight-b.barHeight/2,b.barWidth-b.triangleHeight,b.barHeight)}function d(a,b){a.fillStyle=b.barColor.middle,a.fillRect(b.startX+b.barWidth,b.middleHeight-b.barHeight/2,b.barWidth,b.barHeight)}function e(a,b){a.fillStyle=b.barColor.right,a.fillRect(b.startX+2*b.barWidth,b.middleHeight-b.barHeight/2,b.barWidth-b.triangleHeight,b.barHeight),a.beginPath(),a.moveTo(b.startX+3*b.barWidth,b.canvasHeight/2),a.lineTo(b.startX+3*b.barWidth-b.triangleHeight,b.middleHeight-b.barHeight/2),a.lineTo(b.startX+3*b.barWidth-b.triangleHeight,b.middleHeight+b.barHeight/2),a.fill(),a.closePath()}function f(a){var b={color:a.barColor.left,positionX:a.startX,positionArcY:a.middleHeight-a.barHeight-4,positionTriY:a.middleHeight-a.barHeight/2-1};return isNaN(a.indicatorValue)?b:a.barValues.length<3||isNaN(a.barValues[1])||isNaN(a.barValues[2])?b:(b.color=a.barColor.left,a.indicatorValue<a.barValues[1]?isNaN(a.barValues[0])?(b.positionX=a.startX+a.barWidth/2,b):a.indicatorValue<a.barValues[0]?(b.positionX=a.startX,b):(b.positionX=a.startX+a.barWidth*(a.indicatorValue-a.barValues[0])/(a.barValues[1]-a.barValues[0]),b):a.indicatorValue===a.barValues[1]?(b.positionX=a.startX+a.barWidth,b):(b.color=a.barColor.right,a.indicatorValue>a.barValues[2]?3===a.barValues.length||isNaN(a.barValues[3])?(b.positionX=a.startX+2*a.barWidth+a.barWidth/2,b):a.indicatorValue>a.barValues[3]?(b.positionX=a.startX+3*a.barWidth,b):(b.positionX=a.startX+2*a.barWidth+a.barWidth*(a.indicatorValue-a.barValues[2])/(a.barValues[3]-a.barValues[2]),b):a.indicatorValue===a.barValues[2]?(b.positionX=a.startX+2*a.barWidth,b):(b.color=a.barColor.middle,b.positionX=a.startX+a.barWidth+a.barWidth*(a.indicatorValue-a.barValues[1])/(a.barValues[2]-a.barValues[1]),b)))}function g(a,b){var c=b.indicatorColor,d=f(b);"auto"!==c&&(d.color=c),a.beginPath(),a.arc(d.positionX,b.middleHeight-b.barHeight-4,b.barHeight/2,0,Math.PI,1),a.fillStyle=d.color,a.fill(),a.moveTo(d.positionX-b.barHeight/2-1,d.positionArcY),a.lineTo(d.positionX,d.positionTriY),a.lineTo(d.positionX+b.barHeight/2+1,d.positionArcY),a.fillStyle=d.color,a.fill()}function h(a,b){var c,d,e;for(a.font=b.numberText.font,a.textAlign=b.numberText.align,a.fillStyle=b.numberText.color,d=0;d<b.barValues.length;d++)isNaN(b.barValues[d])||(e=b.startX+b.barWidth*d,c=a.measureText(b.barValues[d]),a.fillText(b.barValues[d],e-c.width/2,b.middleHeight+b.barHeight/2+b.numberText.fontHeight+3))}function i(a,f){var i,j;a.append('<canvas id="jIndicatorCanvas" width="'+f.canvasWidth+'"></canvas>'),i=a.find("#jIndicatorCanvas").get(0),j=i.getContext("2d"),b(i,j,f),c(j,f),d(j,f),e(j,f),g(j,f),h(j,f)}var j=function(b,c){this.$element=a(b),this.defaults={canvasHeight:50,canvasWidth:500,startX:20,barHeight:8,barWidth:150,barColor:{left:"#7BD6FD",middle:"#77DE8B",right:"#FFC977"},indicatorColor:"auto",numberText:{color:"#000000",font:"13px Arial",align:"left",fontHeight:12},barValues:[],indicatorValue:0},this.options=a.extend({},this.defaults,this.options,"object"==typeof c&&c)};a.fn.JIndicator=function(b){return this.each(function(){var c=this;return void 0===c.indicator?c.indicator=new j(this,b):c.indicator.options=a.extend({},c.indicator.options,b),c.indicator.indicator()})},j.prototype={indicator:function(){return i(this.$element,this.options),this}}}(jQuery);